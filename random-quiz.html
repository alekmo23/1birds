<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–°–ª—É—á–∞–π–Ω—ã–π —Ä–µ–∂–∏–º –≤–∏–∫—Ç–æ—Ä–∏–Ω—ã</title>
  <link rel="stylesheet" href="styles.css">
  <style>
    /* –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç–∏–ª–∏ */
    body {
      font-family: 'Arial', sans-serif;
      background: linear-gradient(135deg, #f5f7fa, #c3cfe2);
      margin: 0;
      padding: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
    }

    h1 {
      color: #2c3e50;
      font-size: 2.5em;
      margin-bottom: 20px;
    }

    /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã */
    .settings, .quiz-container, .results {
      background: white;
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      padding: 30px;
      margin-bottom: 20px;
      max-width: 500px;
      width: 100%;
      text-align: center;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .settings:hover, .quiz-container:hover, .results:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
    }

    /* –§–æ—Ä–º–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ */
    label {
      display: block;
      margin: 15px 0 5px;
      font-weight: bold;
      color: #34495e;
    }

    select, input {
      width: 100%;
      padding: 12px;
      margin-bottom: 15px;
      border: 2px solid #ddd;
      border-radius: 8px;
      font-size: 1em;
      transition: border-color 0.3s ease;
    }

    select:focus, input:focus {
      border-color: #4CAF50;
      outline: none;
    }

    button {
      width: 100%;
      padding: 12px;
      background-color: #4CAF50;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 1.1em;
      cursor: pointer;
      transition: background-color 0.3s ease, transform 0.2s ease;
    }

    button:hover {
      background-color: #45a049;
      transform: scale(1.02);
    }

    button:active {
      transform: scale(0.98);
    }

    /* –í–∏–∫—Ç–æ—Ä–∏–Ω–∞ */
    .quiz-container img, .quiz-container audio {
      width: 100%;
      border-radius: 10px;
      margin-bottom: 20px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }

    .options {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .option {
      background-color: #4CAF50;
      color: white;
      padding: 12px;
      border-radius: 8px;
      cursor: pointer;
      transition: background-color 0.3s ease, transform 0.2s ease;
    }

    .option:hover {
      background-color: #45a049;
      transform: translateY(-3px);
    }

    .option:active {
      transform: translateY(0);
    }

    .result {
      margin-top: 20px;
      font-weight: bold;
      color: #2c3e50;
    }

    .timer {
      text-align: center;
      font-size: 1.2em;
      margin-bottom: 20px;
      color: #e74c3c;
    }

    /* –†–µ–∑—É–ª—å—Ç–∞—Ç—ã */
    .results {
      display: none;
    }

    .results h1 {
      color: #4CAF50;
    }

    .results p {
      font-size: 1.2em;
      color: #34495e;
    }

    /* –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ */
    .fixed-buttons {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      width: 100%;
      max-width: 500px;
      text-align: center;
    }

    .fixed-buttons button {
      padding: 8px;
      font-size: 0.9em;
    }

    /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
    @media (max-width: 600px) {
      h1 {
        font-size: 2em;
      }

      .settings, .quiz-container, .results {
        padding: 20px;
      }

      button {
        font-size: 1em;
      }

      .options {
        flex-direction: column;
      }

      .quiz-container img {
        width: 100%;
        height: auto;
      }
    }
  </style>
</head>
<body>
  <div class="settings">
    <h1>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–∏–∫—Ç–æ—Ä–∏–Ω—ã</h1>
    <label for="questions">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ–ø—Ä–æ—Å–æ–≤:</label>
    <select id="questions">
      <option value="5">5</option>
      <option value="10" selected>10</option>
      <option value="15">15</option>
      <option value="20">20</option>
      <option value="30">30</option>
    </select>

    <label for="timing">–†–µ–∂–∏–º —Ç–∞–π–º–µ—Ä–∞:</label>
    <select id="timing">
      <option value="without-timer">–ë–µ–∑ —Ç–∞–π–º–µ—Ä–∞</option>
      <option value="with-timer">–° —Ç–∞–π–º–µ—Ä–æ–º</option>
    </select>

    <label for="time">–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ (–≤ —Å–µ–∫—É–Ω–¥–∞—Ö):</label>
    <input type="number" id="time" min="0" value="30">

    <button id="start-quiz">–ù–∞—á–∞—Ç—å –≤–∏–∫—Ç–æ—Ä–∏–Ω—É</button>
  </div>

  <div class="quiz-container" style="display: none;">
    <h1>–°–ª—É—á–∞–π–Ω—ã–π —Ä–µ–∂–∏–º</h1>
    <div class="timer" id="timer"></div>
    <div id="media-container">
      <!-- –ó–¥–µ—Å—å –±—É–¥–µ—Ç –ª–∏–±–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ, –ª–∏–±–æ –∞—É–¥–∏–æ -->
    </div>
    <div class="options" id="options"></div>
    <div class="result" id="result"></div>
    <div class="score">
      –ü—Ä–∞–≤–∏–ª—å–Ω–æ: <span id="correct">0</span> | –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ: <span id="incorrect">0</span>
    </div>
    <div class="fixed-buttons">
      <button class="home-button" id="home-button-quiz">–ù–∞ –≥–ª–∞–≤–Ω—É—é</button>
    </div>
  </div>

  <div class="results" style="display: none;">
    <h1>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã</h1>
    <p>–ü—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤: <span id="final-correct">0</span></p>
    <p>–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤: <span id="final-incorrect">0</span></p>
    <p id="feedback"></p>
    <div class="fixed-buttons">
      <button id="restart">–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ</button>
      <button class="home-button" id="home-button-results">–ù–∞ –≥–ª–∞–≤–Ω—É—é</button>
    </div>
  </div>

  <script>
    const birds = [
      { name: "–°–æ–π–∫–∞", image: "images/bird1.jpg", sound: "sounds/birds/bird1.mp3" },
      { name: "–î—è—Ç–µ–ª", image: "images/bird2.jpg", sound: "sounds/birds/bird2.mp3" },
      { name: "–°–æ–ª–æ–≤–µ–π", image: "images/bird3.jpg", sound: "sounds/birds/bird3.mp3" },
      { name: "–°–∏–Ω–∏—Ü–∞", image: "images/bird4.jpg", sound: "sounds/birds/bird4.mp3" },
    ];

    let correctAnswers = 0;
    let incorrectAnswers = 0;
    let totalQuestions = 10;
    let currentQuestion = 0;
    let timeLimit = 0; // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –±–µ–∑ —Ç–∞–π–º–µ—Ä–∞
    let timer;

    const settings = document.querySelector(".settings");
    const quizContainer = document.querySelector(".quiz-container");
    const results = document.querySelector(".results");
    const timerDisplay = document.getElementById("timer");
    const mediaContainer = document.getElementById("media-container");
    const optionsContainer = document.getElementById("options");
    const resultDisplay = document.getElementById("result");
    const correctDisplay = document.getElementById("correct");
    const incorrectDisplay = document.getElementById("incorrect");
    const finalCorrect = document.getElementById("final-correct");
    const finalIncorrect = document.getElementById("final-incorrect");
    const feedback = document.getElementById("feedback");

    // –ù–∞—á–∞—Ç—å –≤–∏–∫—Ç–æ—Ä–∏–Ω—É
    document.getElementById("start-quiz").addEventListener("click", () => {
      const questionsInput = parseInt(document.getElementById("questions").value);
      const timeInput = parseInt(document.getElementById("time").value);
      const timingMode = document.getElementById("timing").value;

      if (questionsInput < 1 || questionsInput > 50) {
        alert("–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ–ø—Ä–æ—Å–æ–≤ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—Ç 1 –¥–æ 50.");
        return;
      }

      if (timeInput < 0) {
        alert("–í—Ä–µ–º—è –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º.");
        return;
      }

      totalQuestions = questionsInput;
      timeLimit = timingMode === "with-timer" ? timeInput : 0; // –ï—Å–ª–∏ –≤—ã–±—Ä–∞–Ω —Ä–µ–∂–∏–º –±–µ–∑ —Ç–∞–π–º–µ—Ä–∞, –≤—Ä–µ–º—è = 0
      settings.style.display = "none";
      quizContainer.style.display = "block";
      startQuiz();
    });

    // –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –≤–∏–∫—Ç–æ—Ä–∏–Ω—É
    document.getElementById("restart").addEventListener("click", () => {
      results.style.display = "none";
      settings.style.display = "block";
      correctAnswers = 0;
      incorrectAnswers = 0;
      currentQuestion = 0;
      correctDisplay.textContent = 0;
      incorrectDisplay.textContent = 0;
    });

    function startQuiz() {
      if (currentQuestion >= totalQuestions) {
        endQuiz();
        return;
      }

      const randomBird = birds[Math.floor(Math.random() * birds.length)];
      const otherBirds = birds.filter(bird => bird.name !== randomBird.name);
      const options = [randomBird, ...otherBirds.slice(0, 3)].sort(() => Math.random() - 0.5);

      mediaContainer.innerHTML = "";

      const isImage = Math.random() > 0.5;

      if (isImage) {
        const img = document.createElement("img");
        img.src = randomBird.image;
        img.alt = "–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ç–∏—Ü—ã";
        mediaContainer.appendChild(img);
      } else {
        const audio = document.createElement("audio");
        audio.src = randomBird.sound;
        audio.controls = true;
        mediaContainer.appendChild(audio);
      }

      optionsContainer.innerHTML = options
        .map(bird => `<div class="option" data-name="${bird.name}">${bird.name}</div>`)
        .join("");

      optionsContainer.querySelectorAll(".option").forEach(option => {
        option.addEventListener("click", () => {
          const selectedBird = option.getAttribute("data-name");
          if (selectedBird === randomBird.name) {
            resultDisplay.textContent = "–ü—Ä–∞–≤–∏–ª—å–Ω–æ! üéâ";
            correctAnswers++;
          } else {
            resultDisplay.textContent = `–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ! –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: ${randomBird.name}`;
            incorrectAnswers++;
          }
          correctDisplay.textContent = correctAnswers;
          incorrectDisplay.textContent = incorrectAnswers;

          currentQuestion++;
          setTimeout(startQuiz, 2000);
        });
      });

      // –ó–∞–ø—É—Å–∫ —Ç–∞–π–º–µ—Ä–∞, –µ—Å–ª–∏ –≤—ã–±—Ä–∞–Ω —Ä–µ–∂–∏–º —Å —Ç–∞–π–º–µ—Ä–æ–º
      if (timeLimit > 0) {
        startTimer(timeLimit);
      }
    }

    function startTimer(seconds) {
      let remainingTime = seconds;
      timerDisplay.textContent = `–û—Å—Ç–∞–ª–æ—Å—å –≤—Ä–µ–º–µ–Ω–∏: ${remainingTime} —Å–µ–∫.`;

      timer = setInterval(() => {
        remainingTime--;
        timerDisplay.textContent = `–û—Å—Ç–∞–ª–æ—Å—å –≤—Ä–µ–º–µ–Ω–∏: ${remainingTime} —Å–µ–∫.`;

        if (remainingTime <= 0) {
          clearInterval(timer);
          resultDisplay.textContent = "–í—Ä–µ–º—è –≤—ã—à–ª–æ!";
          currentQuestion++;
          setTimeout(startQuiz, 2000);
        }
      }, 1000);
    }

    function endQuiz() {
      quizContainer.style.display = "none";
      results.style.display = "block";
      finalCorrect.textContent = correctAnswers;
      finalIncorrect.textContent = incorrectAnswers;

      const percentage = (correctAnswers / totalQuestions) * 100;
      if (percentage < 50) {
        feedback.textContent = "–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑, —á—Ç–æ–±—ã —É–ª—É—á—à–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç!";
      } else if (percentage >= 50 && percentage < 80) {
        feedback.textContent = "–•–æ—Ä–æ—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç, –Ω–æ –µ—Å—Ç—å –∫—É–¥–∞ —Å—Ç—Ä–µ–º–∏—Ç—å—Å—è!";
      } else {
        feedback.textContent = "–û—Ç–ª–∏—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç! –í—ã –Ω–∞—Å—Ç–æ—è—â–∏–π —ç–∫—Å–ø–µ—Ä—Ç!";
      }
    }

    document.querySelectorAll(".home-button").forEach(button => {
      button.addEventListener("click", () => {
        window.location.href = "index.html";
      });
    });
  </script>
</body>
</html>